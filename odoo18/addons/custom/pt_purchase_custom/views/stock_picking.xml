<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="inherit_stock_picking_form" model="ir.ui.view">
        <field name="name">inherit_stock_picking_form</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="replace">
<!--                <header>-->
<!--                    <button name="action_confirm" invisible="state != 'draft'" string="Mark as Todo" type="object" class="oe_highlight" groups="base.group_user" data-hotkey="q"/>-->
<!--                    <button name="action_assign" invisible="not show_check_availability" string="Check Availability" type="object" class="oe_highlight" groups="base.group_user" data-hotkey="w"/>-->
<!--                    <button name="button_validate" invisible="state in ('draft', 'confirmed', 'done', 'cancel') or picking_type_code in ('incoming','outgoing')" string="Validate1" type="object" class="oe_highlight" groups="pt_purchase_custom.group_validate_purchase_receipt" data-hotkey="v"/>-->
<!--                    <button name="button_validate" invisible="state in ('draft', 'confirmed', 'done', 'cancel') or picking_type_code not in ('incoming','outgoing')" string="Validate11" type="object" class="oe_highlight" groups="pt_purchase_custom.group_validate_purchase_receipt" data-hotkey="v"/>-->
<!--                    <button name="button_validate" invisible="state in ('waiting', 'assigned','received', 'done', 'cancel') or picking_type_code in ('incoming','outgoing')" string="Validate2" type="object" groups="pt_purchase_custom.group_validate_purchase_receipt,!pt_purchase_custom.group_validate_internal_transfer" class="o_btn_validate" data-hotkey="v"/>-->
<!--                    <button name="button_validate" invisible="state in ('waiting', 'assigned','received', 'done', 'cancel') or picking_type_code not in ('incoming','outgoing')" string="Validate22" type="object" groups="pt_purchase_custom.group_validate_purchase_receipt" class="o_btn_validate" data-hotkey="v"/>-->
<!--                    <widget name="signature" string="Sign" highlight="1" invisible="not id or picking_type_code != 'outgoing' or state != 'done'" full_name="partner_id" groups="stock.group_stock_sign_delivery"/>-->
<!--                    <widget name="signature" string="Sign" invisible="not id or picking_type_code != 'outgoing' or state == 'done'" full_name="partner_id" groups="stock.group_stock_sign_delivery"/>-->
<!--                    <button name="do_print_picking" string="Print" groups="stock.group_stock_user" type="object" invisible="state != 'assigned'" data-hotkey="o"/>-->
<!--                    <button name="379" string="Print" invisible="state != 'done'" type="action" groups="base.group_user" data-hotkey="o"/>-->
<!--                    <button name="397" string="Return" invisible="state != 'done'" type="action" groups="base.group_user" data-hotkey="k"/>-->
<!--                    <field name="state" widget="statusbar" invisible="picking_type_code != 'incoming'" statusbar_visible="draft,assigned,done"/>-->
<!--                    <field name="state" widget="statusbar" invisible="picking_type_code == 'incoming'" statusbar_visible="draft,confirmed,assigned,done"/>-->
<!--                    <button name="action_cancel" invisible="state not in ('assigned', 'confirmed', 'draft', 'waiting')" string="Cancel" groups="base.group_user" type="object" confirm="Are you sure you want to cancel this transfer?" data-hotkey="x"/>-->
<!--                </header>-->
                <header>
                    <button name="action_confirm" invisible="state != 'draft'" string="Mark as Todo" type="object" class="oe_highlight" groups="base.group_user" data-hotkey="q"/>
                    <button name="action_assign" invisible="not show_check_availability" string="Check Availability" type="object" class="oe_highlight" groups="base.group_user" data-hotkey="w"/>
                    <button name="button_validate" invisible="state in ('draft', 'confirmed', 'done', 'cancel') or picking_type_code not in ('incoming','outgoing')" string="Validate" type="object" class="oe_highlight" groups="pt_purchase_custom.group_validate_purchase_receipt" data-hotkey="v"/>
                    <button name="button_validate" invisible="state in ('waiting', 'assigned', 'done', 'cancel') or picking_type_code not in ('incoming','outgoing')" string="Validate" type="object" groups="pt_purchase_custom.group_validate_purchase_receipt" class="o_btn_validate" data-hotkey="v"/>

                    <button name="button_validate" invisible="state != 'in_transit' or picking_type_code != 'internal'" string="Validate" type="object" class="oe_highlight" groups="pt_purchase_custom.group_validate_internal_transfer" data-hotkey="v"/>
<!--                    <button name="button_validate" invisible="state in ('waiting', 'assigned','in_transit', 'done', 'cancel') or picking_type_code != 'internal'" string="inter Validate" type="object" groups="pt_purchase_custom.group_validate_internal_transfer" class="o_btn_validate" data-hotkey="v"/>-->
                    <button name="button_validate" invisible="1" string="Validate" type="object" groups="pt_purchase_custom.group_validate_internal_transfer" class="o_btn_validate" data-hotkey="v"/>
                    <widget name="signature" string="Sign" highlight="1" invisible="not id or picking_type_code != 'outgoing' or state != 'done'" full_name="partner_id" groups="stock.group_stock_sign_delivery"/>
                    <widget name="signature" string="Sign" invisible="not id or picking_type_code != 'outgoing' or state == 'done'" full_name="partner_id" groups="stock.group_stock_sign_delivery"/>
                    <button name="do_print_picking" string="Print" groups="stock.group_stock_user" type="object" invisible="state != 'assigned'" data-hotkey="o"/>
                    <button name="379" string="Print" invisible="state != 'done'" type="action" groups="base.group_user" data-hotkey="o"/>
                    <button name="397" string="Return" invisible="state != 'done'" type="action" groups="base.group_user" data-hotkey="k"/>
                    <field name="state" widget="statusbar" invisible="picking_type_code != 'incoming'" statusbar_visible="draft,assigned,done"/>
                    <field name="state" widget="statusbar" invisible="picking_type_code == 'incoming'" statusbar_visible="draft,confirmed,assigned,done"/>
                    <button name="action_cancel" invisible="state not in ('assigned', 'confirmed', 'draft', 'waiting')" string="Cancel" groups="base.group_user" type="object" confirm="Are you sure you want to cancel this transfer?" data-hotkey="x"/>
                </header>
            </xpath>
            <xpath expr="//button[@name='button_validate']" position="before">
                <button name="action_received" class="oe_highlight" string="Receive" type="object"
                        invisible="picking_type_code != 'incoming' or state not in ['draft','assigned']"/>

                <button name="action_in_transit" class="oe_highlight" string="Transfer" type="object"
                        invisible="picking_type_code != 'internal' or state not in ['assigned']"/>
            </xpath>
            <xpath expr="//button[@name='button_validate']" position="after">

                <button name="action_create_bill" class="oe_highlight" string="Create Bill" type="object"
                        invisible="return_bill != True or invoice_id != False"/>
            </xpath>
<!--            <xpath expr="//button[@name='button_validate']" position="attributes">-->
<!--                <attribute name="groups">pt_purchase_custom.group_validate_purchase_receipt</attribute>-->
<!--            </xpath>-->
            <xpath expr="//field[@name='origin']" position="after">
                <field name="return_bill" invisible="1"/>
            </xpath>
            <xpath expr="//div[@class='oe_button_box']" position="inside">
                <button name="open_invoice_form" string="Bill" type="object" class="oe_stat_button"
                        invisible="not invoice_id"/>
            </xpath>

        </field>
    </record>
</odoo>
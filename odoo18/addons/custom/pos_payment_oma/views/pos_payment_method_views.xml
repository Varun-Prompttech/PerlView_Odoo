<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Inherit Payment Method Form View to add OMA Configuration -->
    <record id="pos_payment_method_view_form_oma" model="ir.ui.view">
        <field name="name">pos.payment.method.form.oma</field>
        <field name="model">pos.payment.method</field>
        <field name="inherit_id" ref="point_of_sale.pos_payment_method_view_form"/>
        <field name="arch" type="xml">
            <!-- Add OMA Configuration Section after the Payment methods group -->
            <xpath expr="//group[@name='Payment methods']" position="after">
                <group string="OMA Configuration" 
                       invisible="use_payment_terminal != 'oma'">
                    <group>
                        <field name="oma_auto_confirm" widget="boolean_toggle"/>
                        <field name="oma_api_endpoint" placeholder="https://rps.omaemirates.ae"
                               invisible="oma_auto_confirm"/>
                        <field name="oma_merchant_id" placeholder="Merchant ID"
                               invisible="oma_auto_confirm"/>
                        <field name="oma_terminal_id" placeholder="Terminal ID"
                               invisible="oma_auto_confirm"/>
                    </group>
                    <group>
                        <field name="oma_secret_key" placeholder="Secret Key" password="True"
                               invisible="oma_auto_confirm"/>
                        <field name="oma_key_version" placeholder="Key Version"
                               invisible="oma_auto_confirm"/>
                        <field name="oma_institute" placeholder="Institute"
                               invisible="oma_auto_confirm"/>
                        <field name="oma_serial_number" placeholder="Serial Number"
                               invisible="oma_auto_confirm"/>
                    </group>
                </group>
            </xpath>
        </field>
    </record>
</odoo>

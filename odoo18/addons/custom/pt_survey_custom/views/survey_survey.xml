<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="survey_form_view_url_inherit" model="ir.ui.view">
        <field name="name">survey.form.inherit</field>
        <field name="model">survey.survey</field>
        <field name="inherit_id" ref="survey.survey_survey_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_start_session']" position="after">
                <button string="Take Quality Check" name="action_send_url" type="object" class="btn-primary"/>
            </xpath>
            <xpath expr="//button[@name='action_test_survey']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[@name='action_start_session']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>

    <record id="survey.menu_survey_form" model="ir.ui.menu">
        <field name="name">Quality Check</field>
    </record>
    <record id="survey.menu_surveys" model="ir.ui.menu">
        <field name="name">Quality Check</field>
    </record>
        <record id="survey.action_survey_form" model="ir.actions.act_window">
            <field name="name">Quality Check</field>
        </record>

    <template id="custom_survey_fill_form_start" inherit_id="survey.survey_fill_form_start">
        <xpath expr="//button[@type='submit']" position="replace">
            <button type="submit" value="start" class="btn btn-primary btn-lg disabled">
                <t t-if="survey.certification">
                    Start Certification
                </t>
                <t t-else="">
                    Start Quality Check
                </t>
            </button>
        </xpath>
    </template>

    <record id="survey_form_kanban_url_inherit" model="ir.ui.view">
        <field name="name">survey.kanban.inherit</field>
        <field name="model">survey.survey</field>
        <field name="inherit_id" ref="survey.survey_survey_view_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_start_session']" position="before">
                <button string="Take Quality Check" name="action_send_url" type="object" class="btn btn-secondary"/>
            </xpath>
            <xpath expr="//button[@name='action_test_survey']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[@name='action_start_session']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>

    <template id="survey_fill_form_done_inherit" inherit_id="survey.survey_fill_form_done">
        <xpath expr="//div[contains(@class, 'o_survey_finished')]//h1" position="replace"/>
        <xpath expr="//div[@class='d-flex gap-3 mt-3']" position="after">
            <div class="mt-3">
                <a role="button" class="btn btn-secondary btn-lg" t-if="env.user.has_group('survey.group_survey_user')"
                   t-attf-href="/odoo/action-survey.action_survey_form/{{survey.id}}">
                    <i class="fa fa-arrow-left me-1"/>
                    Back to Quality Check
                </a>
            </div>
        </xpath>
    </template>

    <template id="survey_button_retake_inherit" inherit_id="survey.survey_button_retake">
        <xpath expr="//p[not(@t-if)]/a" position="replace">
            <a role="button" class="btn btn-primary btn-lg"
               t-att-href="'/survey/retry/%s/%s' % (survey.access_token, answer.access_token)">
                Take Quality Check
            </a>
        </xpath>
    </template>


</odoo>
